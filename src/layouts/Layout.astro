---
import "@/styles/global.css";
import i18next from "i18next";
interface Props {
  title: string;
}

const { title } = Astro.props;

// let head, header, footer;
// // Fetch all resources concurrently
// try {
//   const [headRes, headerRes, footerRes] = await Promise.all([
//     fetch("https://access.redhat.com/services/primer/head/"),
//     fetch("https://access.redhat.com/services/primer/header/"),
//     fetch("https://access.redhat.com/services/primer/footer/"),
//   ]);

//   // Parse the responses
//   head = await headRes.text();
//   header = await headerRes.text();
//   footer = await footerRes.text();
// } catch (error) {
//   console.error("Failed to fetch resources:", error);
// }

// const head = fs.readFileSync(`./chroming/${locale}/head.html`);
// const header = fs.readFileSync(`./chroming/${locale}/header.html`);
// const footer = fs.readFileSync(`./chroming/${locale}/footer.html`);

const { head, header, footer } = Astro.locals as {
  head: string;
  header: string;
  footer: string;
};
---

<!doctype html>
<html lang={i18next.language}>
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="Astro description" />
    <meta name="viewport" content="width=device-width" />
    <link
      rel="icon"
      type="image/svg+xml"
      href="/security/compliances/favicon.svg"
    />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>

    <Fragment set:html={head} />
  </head>

  <body>
    <Fragment set:html={header} />

    <slot />

    <Fragment set:html={footer} />
  </body>
</html>
